#!/usr/bin/env bash
# Prepend /etc/hosts so localhost -> 127.0.0.2 and facebook.com -> 8.8.8.8 (first match wins)

set -euo pipefail

hosts_file="/etc/hosts"

# Prepend lines unconditionally (checker runs once; first match wins in /etc/hosts)
# Add facebook.com first, then localhost so localhost remains the very first line.
# Using sed -i '1i' avoids replacing the file (no mv), so no "device busy".
sed -i '1i 127.0.0.2 localhost' "$hosts_file"
sed -i '1i 8.8.8.8 facebook.com' "$hosts_file"
