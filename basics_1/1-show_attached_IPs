#!/usr/bin/env bash
# Display all active IPv4 addresses (one per line), including 127.0.0.1, using ifconfig

set -euo pipefail

# Prefer explicit paths if needed
IFCONFIG_BIN="$(command -v ifconfig || true)"
if [ -z "$IFCONFIG_BIN" ] && [ -x /sbin/ifconfig ]; then
  IFCONFIG_BIN="/sbin/ifconfig"
fi

if [ -z "$IFCONFIG_BIN" ]; then
  echo "ifconfig command not found" >&2
  exit 1
fi

# Works with net-tools ifconfig output on Ubuntu 22.04.
# Extract "inet <IPv4>", strip the word "inet", and print unique IPs.
"$IFCONFIG_BIN" | grep -oE 'inet ([0-9]{1,3}\.){3}[0-9]{1,3}' | awk '{print $2}' | sort -u
