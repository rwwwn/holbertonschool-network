#!/usr/bin/env bash
# Display all active IPv4 addresses (one per line), including 127.0.0.1, using ifconfig

set -euo pipefail

IFCONFIG_BIN="$(command -v ifconfig || true)"
if [ -z "$IFCONFIG_BIN" ] && [ -x /sbin/ifconfig ]; then
  IFCONFIG_BIN="/sbin/ifconfig"
fi
if [ -z "$IFCONFIG_BIN" ]; then
  echo "ifconfig command not found" >&2
  exit 1
fi

# Works across net-tools variants:
# - grep inet lines, pull IPv4s, strip "addr:" if present, dedupe.
"$IFCONFIG_BIN" \
  | grep -oE 'inet (addr:)?([0-9]{1,3}\.){3}[0-9]{1,3}' \
  | awk '{print $2}' \
  | sed 's/^addr://; s/^ *//' \
  | sort -u
